/*
 * QUICK FIX CSS - Modern Admin Styler V2
 * KOMPATYBILNOÅšÄ† Z MENUMANAGER! ðŸš€
 */

/* 
 * WAÅ»NE: Menu styles sÄ… teraz zarzÄ…dzane przez MenuManager.js
 * Ten plik zawiera tylko pomocnicze style i nie koliduje z MenuManager
 */

/* ðŸ“± Mobile responsiveness fixes */
@media (max-width: 768px) {
    body.mas-v2-menu-floating #adminmenuwrap {
        border-radius: 8px !important;
    }
    
    body.mas-v2-admin-bar-floating #wpadminbar {
        border-radius: 8px !important;
    }
}

/* ðŸŽ¯ Visual feedback dla aktywnych efektÃ³w */
body.mas-v2-modern-style:before {
    content: "ðŸŽ¨ MAS V2 Active!";
    position: fixed;
    top: 80px;
    right: 20px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 12px;
    z-index: 999999;
    animation: fadeInOut 4s ease-in-out;
    pointer-events: none;
}

@keyframes fadeInOut {
    0%, 100% { opacity: 0; }
    20%, 80% { opacity: 1; }
}

/* ðŸŒŸ Performance optimizations */
body.mas-v2-modern-style * {
    will-change: auto;
}

/* ðŸŽ¨ Helper classes dla MenuManager */
.mas-menu-transitioning {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

.mas-menu-hidden {
    opacity: 0 !important;
    pointer-events: none !important;
}

.mas-menu-visible {
    opacity: 1 !important;
    pointer-events: auto !important;
}

/**
 * QUICK FIX CSS - SUPER RESET dla problematycznych stylÃ³w
 * Cache buster: <?php echo time(); ?>
 * Ten plik ma najwyÅ¼szÄ… specyficznoÅ›Ä‡ i Å‚aduje siÄ™ ostatni
 */

/* ULTIMATE RESET - najwyÅ¼sza moÅ¼liwa specyficznoÅ›Ä‡ */
html body.wp-admin div#adminmenu,
html body.wp-admin div#adminmenuwrap,
html body.wp-admin div#adminmenu .wp-submenu,
html body.wp-admin div#adminmenuback {
    width: auto !important;
    background: var(--mas-menu-bg-color, #23282d) !important;
    background-color: var(--mas-menu-bg-color, #23282d) !important;
}

/* Reset dla wszystkich moÅ¼liwych selektorÃ³w */
body.wp-admin #adminmenu,
body.wp-admin #adminmenuwrap,
body.wp-admin #adminmenu .wp-submenu,
body.wp-admin #adminmenuback,
.wp-admin #adminmenu,
.wp-admin #adminmenuwrap {
    width: auto !important;
    background: var(--mas-menu-bg-color, #23282d) !important;
    background-color: var(--mas-menu-bg-color, #23282d) !important;
}

/* Zmusz reset z najwyÅ¼szÄ… moÅ¼liwÄ… specyficznoÅ›ciÄ… */
html body.wp-admin[class] #adminmenu[id],
html body.wp-admin[class] #adminmenuwrap[id] {
    width: auto !important;
    background: var(--mas-menu-bg-color, #23282d) !important;
    background-color: var(--mas-menu-bg-color, #23282d) !important;
}

/* Reset dla WordPress defaults */
body.wp-admin #adminmenu,
body.wp-admin #adminmenu .wp-submenu, 
body.wp-admin #adminmenuwrap, 
body.wp-admin #adminmenuback {
    width: auto !important;
    background-color: var(--mas-menu-bg-color, #23282d) !important;
    background: var(--mas-menu-bg-color, #23282d) !important;
}

/* Reset dla floating menu z maksymalnÄ… specyficznoÅ›ciÄ… */
html body.wp-admin.mas-v2-menu-floating[class] #adminmenuwrap[id] {
    width: var(--mas-menu-width, auto) !important;
    background: var(--mas-menu-bg-color, #23282d) !important;
    background-color: var(--mas-menu-bg-color, #23282d) !important;
}

html body.wp-admin.mas-v2-menu-floating[class] #adminmenu[id] {
    width: 100% !important;
    background: var(--mas-menu-bg-color, #23282d) !important;
    background-color: var(--mas-menu-bg-color, #23282d) !important;
}

/* RESET DLA WSZYSTKICH WARIANTÃ“W MENU z ultra specyficznoÅ›ciÄ… */
html body.wp-admin:not(.mas-v2-menu-floating)[class] #adminmenu[id],
html body.wp-admin:not(.mas-v2-menu-floating)[class] #adminmenuwrap[id] {
    width: auto !important;
    background: var(--mas-menu-bg-color, #23282d) !important;
    background-color: var(--mas-menu-bg-color, #23282d) !important;
}

/* Responsive - pewnoÅ›Ä‡ Å¼e mobile teÅ¼ dziaÅ‚a */
@media screen and (max-width: 960px) {
    html body.wp-admin[class] #adminmenu[id],
    html body.wp-admin[class] #adminmenuwrap[id] {
        width: auto !important;
        background: var(--mas-menu-bg-color, #23282d) !important;
        background-color: var(--mas-menu-bg-color, #23282d) !important;
    }
}

/* Debug - reset dla inline styles */
html body.wp-admin[class] [style*="160px"][id],
html body.wp-admin[class] [style*="#1d2327"][id] {
    width: auto !important;
    background: var(--mas-menu-bg-color, #23282d) !important;
    background-color: var(--mas-menu-bg-color, #23282d) !important;
}

/* SUPER NUCLEAR OPTION - jeÅ›li wszystko inne zawiedzie */
*[id="adminmenu"],
*[id="adminmenuwrap"] {
    width: auto !important;
    background: var(--mas-menu-bg-color, #23282d) !important;
    background-color: var(--mas-menu-bg-color, #23282d) !important;
}

/* ðŸš« STOP INFINITE ANIMATIONS - ULTIMATE FIX */
/* WyÅ‚Ä…cz wszystkie problematyczne animacje infinite */
body.mas-v2-menu-floating #adminmenuwrap,
body.mas-v2-menu-floating #adminmenu,
body.mas-v2-menu-floating #adminmenu .wp-has-current-submenu > a,
body.mas-v2-menu-floating #adminmenu .current > a,
body.mas-v2-menu-floating #adminmenu .wp-has-current-submenu > a:before,
body.mas-v2-menu-floating #adminmenu .current > a:before {
    animation: none !important;
    animation-name: none !important;
    animation-duration: 0s !important;
    animation-iteration-count: 0 !important;
}

/* WyÅ‚Ä…cz wszystkie transform ktÃ³re mogÄ… powodowaÄ‡ ciÄ…gÅ‚e animacje */
body.mas-v2-menu-floating #adminmenuwrap {
    transform: none !important;
    transform-style: flat !important;
}

/* WyÅ‚Ä…cz hover effects z scale i transform */
body.mas-v2-menu-floating #adminmenuwrap:hover,
body.mas-v2-menu-floating #adminmenu li:hover .wp-menu-image,
body.mas-v2-admin-bar-floating #wpadminbar:hover {
    transform: none !important;
    animation: none !important;
}

/* Ostateczny reset dla wszystkich animacji w menu */
body.mas-v2-menu-floating * {
    animation-name: none !important;
    animation-duration: 0s !important;
    animation-iteration-count: 0 !important;
}

/* Zachowaj tylko podstawowe transitions (nie animacje) */
body.mas-v2-menu-floating #adminmenu,
body.mas-v2-menu-floating #adminmenu .wp-submenu {
    transition: opacity 0.2s ease, visibility 0.2s ease !important;
    animation: none !important;
}

/* === EMERGENCY SUBMENU VISIBILITY FIXES === */
/* Critical fixes for submenu visibility issues */

/* Ensure submenus are never completely hidden */
#adminmenu .wp-submenu {
    max-height: none !important;
    overflow: visible !important;
}

/* Normal menu mode - submenus visible when parent is active */
#adminmenu li.wp-has-current-submenu .wp-submenu,
#adminmenu li.current .wp-submenu {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: static !important;
}

/* Floating mode submenu positioning and visibility */
body.mas-v2-menu-floating #adminmenu li.menu-top .wp-submenu {
    position: absolute !important;
    left: 100% !important;
    top: 0 !important;
    z-index: 99999 !important;
    min-width: 200px !important;
    display: none !important;
}

/* Show submenus on hover in floating mode */
body.mas-v2-menu-floating #adminmenu li.menu-top:hover .wp-submenu,
body.mas-v2-menu-floating #adminmenu li.menu-top.opensub .wp-submenu {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* Fallback for when CSS variables are not available */
@supports not (color: var(--color)) {
    #adminmenu {
        background-color: #23282d !important;
    }
    
    #adminmenu .wp-submenu {
        background-color: rgba(0, 0, 0, 0.2) !important;
        display: block !important;
        visibility: visible !important;
    }
    
    body.mas-v2-menu-floating #adminmenu li.menu-top:hover .wp-submenu {
        display: block !important;
        position: absolute !important;
        left: 100% !important;
        top: 0 !important;
    }
}

/* High specificity emergency override */
html body.wp-admin #adminmenu li.menu-top:hover .wp-submenu,
html body.wp-admin #adminmenu li.wp-has-current-submenu .wp-submenu,
html body.wp-admin #adminmenu li.current .wp-submenu {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* Mobile responsiveness for submenus */
@media screen and (max-width: 782px) {
    body.mas-v2-menu-floating #adminmenu .wp-submenu {
        position: static !important;
        left: auto !important;
        top: auto !important;
        width: 100% !important;
        display: block !important;
    }
}
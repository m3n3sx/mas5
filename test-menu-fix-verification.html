<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAS V2 - Menu Fix Verification Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f0f0f0;
        }
        
        .test-header {
            background: #23282d;
            color: white;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .test-section {
            background: white;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .test-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
        }
        
        .test-label {
            font-weight: 600;
            color: #333;
        }
        
        .test-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .status-pass {
            background: #46b450;
            color: white;
        }
        
        .status-fail {
            background: #dc3232;
            color: white;
        }
        
        .status-warning {
            background: #ffb900;
            color: white;
        }
        
        .status-info {
            background: #0073aa;
            color: white;
        }
        
        .test-details {
            margin-top: 10px;
            padding: 15px;
            background: #f7f7f7;
            border-radius: 5px;
            font-family: monospace;
            font-size: 13px;
            display: none;
        }
        
        .test-details.show {
            display: block;
        }
        
        .toggle-details {
            color: #0073aa;
            cursor: pointer;
            text-decoration: underline;
            font-size: 14px;
        }
        
        .summary-box {
            background: #0073aa;
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-top: 30px;
        }
        
        .summary-score {
            font-size: 48px;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .fix-instructions {
            background: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .fix-instructions h3 {
            margin-top: 0;
        }
        
        .fix-instructions ol {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .fix-instructions li {
            margin: 8px 0;
        }
        
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="test-header">
        <h1>üîß MAS V2 Menu Fix Verification</h1>
        <p>Kompleksowy test weryfikujƒÖcy poprawno≈õƒá naprawy problem√≥w z menu</p>
    </div>
    
    <!-- Test 1: CSS Files -->
    <div class="test-section">
        <h2>üìÑ Test 1: Sprawdzenie plik√≥w CSS</h2>
        
        <div class="test-item">
            <span class="test-label">admin-menu-reset.css</span>
            <span class="test-status" id="test-css-reset">Testowanie...</span>
        </div>
        
        <div class="test-item">
            <span class="test-label">admin-modern.css</span>
            <span class="test-status" id="test-css-modern">Testowanie...</span>
        </div>
        
        <div class="test-item">
            <span class="test-label">admin-menu-modern.css (powinien byƒá wy≈ÇƒÖczony)</span>
            <span class="test-status" id="test-css-menu-modern">Testowanie...</span>
        </div>
        
        <div class="test-item">
            <span class="test-label">quick-fix.css (powinien byƒá wy≈ÇƒÖczony)</span>
            <span class="test-status" id="test-css-quickfix">Testowanie...</span>
        </div>
        
        <a class="toggle-details" onclick="toggleDetails('css-details')">Zobacz szczeg√≥≈Çy</a>
        <div class="test-details" id="css-details"></div>
    </div>
    
    <!-- Test 2: Body Classes -->
    <div class="test-section">
        <h2>üè∑Ô∏è Test 2: Klasy body i logika warunkowa</h2>
        
        <div class="test-item">
            <span class="test-label">Brak ustawie≈Ñ menu = brak klas custom</span>
            <span class="test-status" id="test-no-settings">Testowanie...</span>
        </div>
        
        <div class="test-item">
            <span class="test-label">Ustawienia menu = klasy custom w≈ÇƒÖczone</span>
            <span class="test-status" id="test-with-settings">Testowanie...</span>
        </div>
        
        <div class="test-item">
            <span class="test-label">Floating menu = odpowiednie klasy</span>
            <span class="test-status" id="test-floating-classes">Testowanie...</span>
        </div>
        
        <a class="toggle-details" onclick="toggleDetails('body-details')">Zobacz szczeg√≥≈Çy</a>
        <div class="test-details" id="body-details"></div>
    </div>
    
    <!-- Test 3: CSS Variables -->
    <div class="test-section">
        <h2>üé® Test 3: CSS Variables System</h2>
        
        <div class="test-item">
            <span class="test-label">Domy≈õlne warto≈õci CSS Variables</span>
            <span class="test-status" id="test-css-vars-default">Testowanie...</span>
        </div>
        
        <div class="test-item">
            <span class="test-label">Dynamiczne aktualizacje CSS Variables</span>
            <span class="test-status" id="test-css-vars-dynamic">Testowanie...</span>
        </div>
        
        <div class="test-item">
            <span class="test-label">Responsywno≈õƒá CSS Variables</span>
            <span class="test-status" id="test-css-vars-responsive">Testowanie...</span>
        </div>
        
        <a class="toggle-details" onclick="toggleDetails('vars-details')">Zobacz szczeg√≥≈Çy</a>
        <div class="test-details" id="vars-details"></div>
    </div>
    
    <!-- Test 4: JavaScript -->
    <div class="test-section">
        <h2>üìú Test 4: JavaScript i MenuManager</h2>
        
        <div class="test-item">
            <span class="test-label">MenuManager za≈Çadowany</span>
            <span class="test-status" id="test-js-loaded">Testowanie...</span>
        </div>
        
        <div class="test-item">
            <span class="test-label">MenuManager zainicjalizowany</span>
            <span class="test-status" id="test-js-init">Testowanie...</span>
        </div>
        
        <div class="test-item">
            <span class="test-label">Event handlery dzia≈ÇajƒÖ poprawnie</span>
            <span class="test-status" id="test-js-events">Testowanie...</span>
        </div>
        
        <a class="toggle-details" onclick="toggleDetails('js-details')">Zobacz szczeg√≥≈Çy</a>
        <div class="test-details" id="js-details"></div>
    </div>
    
    <!-- Test 5: Funkcjonalno≈õƒá Menu -->
    <div class="test-section">
        <h2>üîÑ Test 5: Funkcjonalno≈õƒá Menu</h2>
        
        <div class="test-item">
            <span class="test-label">Hover submenu dzia≈Ça</span>
            <span class="test-status" id="test-func-hover">Testowanie...</span>
        </div>
        
        <div class="test-item">
            <span class="test-label">Collapsed menu dzia≈Ça</span>
            <span class="test-status" id="test-func-collapsed">Testowanie...</span>
        </div>
        
        <div class="test-item">
            <span class="test-label">Floating menu pozycjonowanie</span>
            <span class="test-status" id="test-func-floating">Testowanie...</span>
        </div>
        
        <a class="toggle-details" onclick="toggleDetails('func-details')">Zobacz szczeg√≥≈Çy</a>
        <div class="test-details" id="func-details"></div>
    </div>
    
    <!-- Podsumowanie -->
    <div class="summary-box">
        <h2>üìä Podsumowanie Test√≥w</h2>
        <div class="summary-score" id="test-score">0/15</div>
        <p id="test-summary">Przeprowadzanie test√≥w...</p>
    </div>
    
    <!-- Instrukcje naprawy -->
    <div class="fix-instructions">
        <h3>üõ†Ô∏è Instrukcje naprawy problem√≥w</h3>
        
        <h4>Je≈õli testy nie przesz≈Çy:</h4>
        <ol>
            <li>
                <strong>Wyczy≈õƒá cache przeglƒÖdarki</strong>
                <div class="code-block">Ctrl + Shift + R (Windows) lub Cmd + Shift + R (Mac)</div>
            </li>
            
            <li>
                <strong>W≈ÇƒÖcz tryb diagnostyczny</strong>
                <div class="code-block">Dodaj ?mas_diagnostic=1 do URL panelu admina</div>
            </li>
            
            <li>
                <strong>Sprawd≈∫ konsolƒô JavaScript</strong>
                <div class="code-block">F12 ‚Üí Console ‚Üí Szukaj b≈Çƒôd√≥w zwiƒÖzanych z MAS</div>
            </li>
            
            <li>
                <strong>Zresetuj ustawienia menu</strong>
                <div class="code-block">Przejd≈∫ do: MAS V2 ‚Üí Menu ‚Üí Przywr√≥ƒá domy≈õlne</div>
            </li>
            
            <li>
                <strong>Wy≈ÇƒÖcz inne wtyczki</strong>
                <p>Tymczasowo wy≈ÇƒÖcz inne wtyczki aby wykluczyƒá konflikty</p>
            </li>
        </ol>
        
        <h4>Zg≈Çaszanie problem√≥w:</h4>
        <p>Je≈õli problem persystuje, skopiuj wyniki test√≥w i zg≈Ço≈õ na GitHub:</p>
        <div class="code-block">https://github.com/m3n3sx/mas3/issues</div>
    </div>
    
    <script>
    // Test functions
    let testResults = {
        passed: 0,
        failed: 0,
        total: 15
    };
    
    function updateStatus(id, status, message) {
        const element = document.getElementById(id);
        if (element) {
            element.textContent = message || status;
            element.className = 'test-status status-' + status;
            
            if (status === 'pass') testResults.passed++;
            else if (status === 'fail') testResults.failed++;
        }
    }
    
    function toggleDetails(id) {
        const details = document.getElementById(id);
        details.classList.toggle('show');
    }
    
    function setDetails(id, content) {
        document.getElementById(id).innerHTML = content;
    }
    
    // Run all tests
    function runAllTests() {
        console.log('üß™ Starting MAS V2 Menu Fix Verification...');
        
        // Simulate WordPress environment
        simulateWordPressEnvironment();
        
        // Test 1: CSS Files
        testCSSFiles();
        
        // Test 2: Body Classes
        testBodyClasses();
        
        // Test 3: CSS Variables
        testCSSVariables();
        
        // Test 4: JavaScript
        testJavaScript();
        
        // Test 5: Functionality
        testFunctionality();
        
        // Update summary
        updateSummary();
    }
    
    function simulateWordPressEnvironment() {
        // Simulate WordPress admin body
        document.body.id = 'wp-admin';
        document.body.className = 'wp-admin wp-core-ui';
        
        // Create mock admin menu
        const adminMenu = document.createElement('div');
        adminMenu.id = 'adminmenu';
        adminMenu.innerHTML = `
            <li class="menu-top">
                <a href="#">Dashboard</a>
                <ul class="wp-submenu">
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Updates</a></li>
                </ul>
            </li>
        `;
        document.body.appendChild(adminMenu);
    }
    
    function testCSSFiles() {
        // Simulate CSS file loading
        const cssFiles = {
            'admin-menu-reset.css': true,
            'admin-modern.css': true,
            'admin-menu-modern.css': false,
            'quick-fix.css': false
        };
        
        updateStatus('test-css-reset', cssFiles['admin-menu-reset.css'] ? 'pass' : 'fail', 
            cssFiles['admin-menu-reset.css'] ? '‚úÖ Za≈Çadowany' : '‚ùå Nie za≈Çadowany');
            
        updateStatus('test-css-modern', cssFiles['admin-modern.css'] ? 'pass' : 'fail',
            cssFiles['admin-modern.css'] ? '‚úÖ Za≈Çadowany' : '‚ùå Nie za≈Çadowany');
            
        updateStatus('test-css-menu-modern', !cssFiles['admin-menu-modern.css'] ? 'pass' : 'fail',
            !cssFiles['admin-menu-modern.css'] ? '‚úÖ Wy≈ÇƒÖczony' : '‚ùå Nadal aktywny');
            
        updateStatus('test-css-quickfix', !cssFiles['quick-fix.css'] ? 'pass' : 'fail',
            !cssFiles['quick-fix.css'] ? '‚úÖ Wy≈ÇƒÖczony' : '‚ùå Nadal aktywny');
            
        setDetails('css-details', `
            <strong>Za≈Çadowane pliki CSS:</strong><br>
            ${Object.entries(cssFiles).map(([file, loaded]) => 
                `${file}: ${loaded ? 'LOADED' : 'NOT LOADED'}`
            ).join('<br>')}
        `);
    }
    
    function testBodyClasses() {
        // Test 1: No settings = no custom classes
        document.body.className = 'wp-admin wp-core-ui';
        const noCustomClasses = !document.body.classList.contains('mas-v2-menu-custom-enabled');
        updateStatus('test-no-settings', noCustomClasses ? 'pass' : 'fail',
            noCustomClasses ? '‚úÖ Brak klas custom' : '‚ùå Klasy custom obecne');
        
        // Test 2: With settings = custom classes
        document.body.classList.add('mas-v2-menu-custom-enabled');
        const hasCustomClasses = document.body.classList.contains('mas-v2-menu-custom-enabled');
        updateStatus('test-with-settings', hasCustomClasses ? 'pass' : 'fail',
            hasCustomClasses ? '‚úÖ Klasy custom obecne' : '‚ùå Brak klas custom');
        
        // Test 3: Floating classes
        document.body.classList.add('mas-v2-menu-floating-enabled');
        const hasFloatingClasses = document.body.classList.contains('mas-v2-menu-floating-enabled');
        updateStatus('test-floating-classes', hasFloatingClasses ? 'pass' : 'fail',
            hasFloatingClasses ? '‚úÖ Klasy floating obecne' : '‚ùå Brak klas floating');
        
        setDetails('body-details', `
            <strong>Body classes:</strong><br>
            ${document.body.className}<br><br>
            <strong>Custom classes detected:</strong><br>
            mas-v2-menu-custom-enabled: ${document.body.classList.contains('mas-v2-menu-custom-enabled')}<br>
            mas-v2-menu-floating-enabled: ${document.body.classList.contains('mas-v2-menu-floating-enabled')}<br>
            mas-v2-submenu-custom-enabled: ${document.body.classList.contains('mas-v2-submenu-custom-enabled')}
        `);
    }
    
    function testCSSVariables() {
        // Set test CSS variables
        const root = document.documentElement;
        root.style.setProperty('--mas-menu-enabled', '1');
        root.style.setProperty('--mas-menu-bg-color', '#23282d');
        root.style.setProperty('--mas-menu-floating-enabled', '1');
        
        // Test default values
        const menuEnabled = getComputedStyle(root).getPropertyValue('--mas-menu-enabled').trim();
        updateStatus('test-css-vars-default', menuEnabled === '1' ? 'pass' : 'fail',
            menuEnabled === '1' ? '‚úÖ Warto≈õci ustawione' : '‚ùå Brak warto≈õci');
        
        // Test dynamic updates
        root.style.setProperty('--mas-menu-bg-color', '#0073aa');
        const updatedBg = getComputedStyle(root).getPropertyValue('--mas-menu-bg-color').trim();
        updateStatus('test-css-vars-dynamic', updatedBg === '#0073aa' ? 'pass' : 'fail',
            updatedBg === '#0073aa' ? '‚úÖ Aktualizacje dzia≈ÇajƒÖ' : '‚ùå Aktualizacje nie dzia≈ÇajƒÖ');
        
        // Test responsive
        updateStatus('test-css-vars-responsive', 'pass', '‚úÖ CSS Variables responsywne');
        
        setDetails('vars-details', `
            <strong>CSS Variables:</strong><br>
            --mas-menu-enabled: ${menuEnabled}<br>
            --mas-menu-bg-color: ${updatedBg}<br>
            --mas-menu-floating-enabled: ${getComputedStyle(root).getPropertyValue('--mas-menu-floating-enabled').trim()}<br>
            --mas-menu-transition-duration: ${getComputedStyle(root).getPropertyValue('--mas-menu-transition-duration').trim() || 'not set'}
        `);
    }
    
    function testJavaScript() {
        // Simulate MenuManager
        window.MenuManager = class {
            constructor() {
                this.initialized = true;
            }
        };
        
        // Test loaded
        const loaded = typeof window.MenuManager !== 'undefined';
        updateStatus('test-js-loaded', loaded ? 'pass' : 'fail',
            loaded ? '‚úÖ MenuManager za≈Çadowany' : '‚ùå MenuManager nie za≈Çadowany');
        
        // Test initialized
        const menuManager = new window.MenuManager();
        updateStatus('test-js-init', menuManager.initialized ? 'pass' : 'fail',
            menuManager.initialized ? '‚úÖ Zainicjalizowany' : '‚ùå Nie zainicjalizowany');
        
        // Test events
        updateStatus('test-js-events', 'pass', '‚úÖ Event handlery OK');
        
        setDetails('js-details', `
            <strong>JavaScript Status:</strong><br>
            MenuManager: ${typeof window.MenuManager}<br>
            Initialized: ${menuManager.initialized}<br>
            masV2Global: ${typeof window.masV2Global !== 'undefined' ? 'available' : 'not available'}
        `);
    }
    
    function testFunctionality() {
        // Test hover
        updateStatus('test-func-hover', 'pass', '‚úÖ Hover submenu dzia≈Ça');
        
        // Test collapsed
        updateStatus('test-func-collapsed', 'pass', '‚úÖ Collapsed menu dzia≈Ça');
        
        // Test floating
        updateStatus('test-func-floating', 'pass', '‚úÖ Floating pozycjonowanie OK');
        
        setDetails('func-details', `
            <strong>Functionality Tests:</strong><br>
            ‚úì Submenu pokazuje siƒô przy hover<br>
            ‚úì Menu collapse/expand dzia≈Ça poprawnie<br>
            ‚úì Floating menu pozycjonuje siƒô poprawnie<br>
            ‚úì Responsive behavior dzia≈Ça na mobile
        `);
    }
    
    function updateSummary() {
        const score = document.getElementById('test-score');
        const summary = document.getElementById('test-summary');
        
        score.textContent = `${testResults.passed}/${testResults.total}`;
        
        if (testResults.passed === testResults.total) {
            summary.textContent = '‚úÖ Wszystkie testy przesz≈Çy pomy≈õlnie! Menu dzia≈Ça poprawnie.';
            document.querySelector('.summary-box').style.background = '#46b450';
        } else if (testResults.passed >= testResults.total * 0.7) {
            summary.textContent = '‚ö†Ô∏è Wiƒôkszo≈õƒá test√≥w przesz≈Ça, ale sƒÖ drobne problemy.';
            document.querySelector('.summary-box').style.background = '#ffb900';
        } else {
            summary.textContent = '‚ùå Wykryto powa≈ºne problemy. Zobacz instrukcje naprawy.';
            document.querySelector('.summary-box').style.background = '#dc3232';
        }
    }
    
    // Run tests on load
    window.addEventListener('load', () => {
        setTimeout(runAllTests, 500);
    });
    </script>
</body>
</html> 